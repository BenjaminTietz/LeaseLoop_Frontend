<div class="booking-popup-backdrop" (click)="closePopup()"></div>
<div class="booking-popup">
    <h2>Book now</h2>
    <div class="booking-summary">
        <div class="summary-row">
            <label>Check-in:</label>
            <span>{{ bookingService.checkInDate() | date: 'mediumDate' }}</span>
        </div>
        <div class="summary-row">
            <label>Check-out:</label>
            <span>{{ bookingService.checkOutDate() | date: 'mediumDate' }}</span>
        </div>
        <div class="summary-row">
            <label>Guests:</label>
            <span>{{ bookingService.guestCount() }}</span>
        </div>
        <div class="summary-row total">
            <label>Total:</label>
            <strong>{{ totalPrice() | currency: 'EUR' }}</strong>
        </div>
    </div>
    <!-- Services Selection -->
    @if (bookingService.services().length > 0) {
    <button class="toggle-services-btn" (click)="toggleServicesVisibility()">
        {{ showServices() ? 'Hide' : 'Show' }} Additional Services
    </button>
    }
    <!-- Additional Services -->
    @if (showServices() && bookingService.services().length > 0) {
    <div class="form-group service-section" [@fadeExpand]>
        <label>Additional Services</label>
        @for (service of bookingService.services(); track service.id; let index = $index) {
        <div>
            <label class="checkbox-label">
                <input type="checkbox" [checked]="selectedServiceIds().has(service.id)"
                    (change)="onCheckboxChange($event, service.id)" />
                {{ service.name }} â€“ {{ service.price | currency: 'EUR' }} - {{ service.type }}
            </label>
        </div>
        }
    </div>
    }
    <button class="btn primary" (click)="submitBooking()">Confirm Booking</button>
</div>